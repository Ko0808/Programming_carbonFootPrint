<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFP Calculator ~local production for local consumption~</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <py-config>
         packages = ["ssl"] <!-- for security of data transmission for distance calculation -->
    </py-config>

    """<link rel="stylesheet" href="style.css">""
</head>
<body>
    <div id="loading">Loading...</div>

    <header>
        <h1>CFP Calculator ~local production for local consumption~</h1>
    </header>

    <div class="container">

        <!-- プロフィールセクション -->
        <div id="profile-section" class="section">
            <h2 id="profile-title">HELLO</h2>
            <div id="profile-display"></div>
            <div id="profile-setup">
                <p>Register Your Information</p>
                <div class="form-grid">
                    <div>
                        <label for="user-name">Name:</label>
                        <input type="text" id="user-name">
                    </div>
                    <div>
                        <label for="user-residence">Location of Residence:</label>
                        <input type="text" id="user-residence" placeholder="e.g., Selangor, Malaysia">
                    </div>
                    <div>
                        <button py-click="app.SaveUserData">SAVE</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input purchaced food -->
        <div id="main-app" class="section" style="display: none;">
            <h2>your Note</h2>
            <p id="current-date"></p>
            <div class="form-grid">
                <div>
                    <label for="food-item">Food Item:</label>
                    <select id="food-item">
                        <option value="tomato">Tomato</option>
                        <option value="rice">Rice</option>
                        <option value="chicken">Chicken</option>
                        <option value="carrot">Carrot</option>
                        <option value="durian">Durian</option>
                        <option value="palm_oil">Palm Oil</option>
                        <option value="tilapia">Tilapia (Fish)</option>
                        <option value="kangkung">Kangkung (Water Spinach)</option>
                        <option value="chili_padi">Chili Padi (Bird's Eye Chili)</option>
                        <option value="mango">Mango</option>
                    </select>
                </div>
                <div>
                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" value="1" min="0.1" step="0.1">
                </div>
                <div>
                    <label for="unit">Unit:</label>
                    <select id="unit">
                        <option value="kg">kg</option>
                        <option value="piece">piece</option>
                    </select>
                </div>
                <div>
                    <label for="origin">Origin:</label>
                    <input type="text" id="origin" placeholder="e.g., Pahang, Malaysia">
                </div>
                <div>
                    <button py-click="app.AddFood">Add to List</button>
                </div>
            </div>

            <h3>Today's List</h3>
            <table id="daily-list-table">
                <thead>
                    <tr><th>Food Item</th><th>Quantity</th><th>Origin</th></tr>
                </thead>
                <tbody>
                    <!-- List of items -->
                </tbody>
            </table>
            <button py-click="app.CalculateDaily" class="secondary" style="margin-top: 1em;">Calculate Daily CFP</button>

            <!-- Summary -->
            <div id="summary-section" style="display: none;">
                <h3>CFP Summary</h3>
                <table id="summary-table">
                    <thead>
                        <tr><th>Food Item</th><th>Weight (kg)</th><th>CFP (kg-CO₂)</th><th>Domestic (kg-CO₂)</th></tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr><td>Total</td><td id="total-weight"></td><td id="total-cfp"></td><td id="total-domestic-cfp"></td></tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard-section" class="section" style="display: none;">
            <h2>Dashboard</h2>
            <div id="dashboard-stats"></div>
            <div id="tree-display">
                <h3>My Forest</h3>
                <p>To absorb the carbon so far, you need this many trees.</p>
                <div id="my-forest"></div>
            </div>
        </div>
    </div>

    <py-script src="script.py"></py-script>
</body>
</html>
